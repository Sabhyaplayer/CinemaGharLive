<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Cinema Ghar IPL 2025 Live - Multi-Stream</title> <!-- Updated Page Title -->
  <style>
    body {
      margin: 0;
      padding: 20px; /* Adjusted padding */
      background: #111; /* Slightly lighter dark background */
      display: flex;
      flex-direction: column;
      justify-content: flex-start; /* Align content to the top */
      align-items: center;
      min-height: 100vh;
      box-sizing: border-box;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; /* Nicer font */
    }
    #page-title {
      color: #eee; /* Lighter text */
      font-size: 2em; /* Adjusted size */
      margin-bottom: 20px;
      text-align: center;
    }
    #player-container {
      width: 100%;
      max-width: 850px; /* Slightly larger max-width */
      /* Use padding-top hack for aspect ratio (e.g., 16:9) */
      position: relative;
      padding-top: 56.25%; /* 16:9 Aspect Ratio (9 / 16 * 100) */
      background: #000;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.4); /* Softer shadow */
      border-radius: 8px; /* Rounded corners */
      overflow: hidden; /* Keep iframe/video inside */
      margin-bottom: 20px; /* Space below player */
    }
    #player-container video,
    #player-container iframe {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      border: none; /* Remove iframe border */
      display: block; /* Ensure block behavior */
    }
    /* Hide elements by default until switched */
    #video-player {
       display: block; /* Show HLS player by default */
    }
    #iframe-player {
        display: none; /* Hide iframe player by default */
    }

    .stream-switcher {
        margin-bottom: 20px;
        text-align: center;
    }
    .stream-switcher button {
        padding: 10px 20px;
        margin: 0 10px;
        font-size: 1em;
        cursor: pointer;
        background-color: #444;
        color: #fff;
        border: none;
        border-radius: 5px;
        transition: background-color 0.3s ease;
    }
    .stream-switcher button:hover {
        background-color: #666;
    }
     .stream-switcher button.active {
        background-color: #007bff; /* Highlight active stream */
        font-weight: bold;
    }
  </style>
</head>
<body>

  <!-- Page Title -->
  <h1 id="page-title">Cinema Ghar IPL 2025 Live</h1>

  <!-- Stream Switcher Buttons -->
  <div class="stream-switcher">
    <button id="btn-stream1" class="active">Stream 1 (HLS)</button>
    <button id="btn-stream2">Stream 2 (Embed)</button>
  </div>

  <!-- Player Container -->
  <div id="player-container">
    <!-- Video Player (HLS) -->
    <video id="video-player" controls muted playsinline></video>

    <!-- Iframe Player (Extracted Source) -->
    <iframe id="iframe-player"
            src="" <!-- Initially empty, set via JS -->
            frameborder="0"
            allow="autoplay; fullscreen; picture-in-picture"
            allowfullscreen>
    </iframe>
  </div>

  <!-- HLS Player Script -->
  <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
  <script>
    const videoElement = document.getElementById('video-player');
    const iframeElement = document.getElementById('iframe-player');
    const btnStream1 = document.getElementById('btn-stream1');
    const btnStream2 = document.getElementById('btn-stream2');

    // --- Stream Sources ---
    const hlsSrc = 'https://m3u8x2.cloudycx.net/media/hls/files/1080p.m3u8'; // Original HLS source
    const iframeSrc = 'https://crichd.onlinetvbd.com/?play=369'; // Extracted iframe source

    let hls = null; // Variable to hold the HLS instance

    // --- HLS Setup Function ---
    function setupHLS() {
      // Destroy existing HLS instance if it exists
      if (hls) {
        hls.destroy();
        hls = null;
      }

      if (Hls.isSupported()) {
        console.log("Initializing HLS.js");
        hls = new Hls({
          maxBufferLength: 30,
          liveSyncDurationCount: 3,
          enableWorker: true,
          lowLatencyMode: true
        });

        hls.loadSource(hlsSrc);
        hls.attachMedia(videoElement);

        hls.on(Hls.Events.MANIFEST_PARSED, function() {
          console.log("HLS Manifest parsed, attempting to play...");
          videoElement.controls = true;
          videoElement.play().catch(error => {
             console.warn("HLS Autoplay prevented:", error);
          });
        });

        hls.on(Hls.Events.ERROR, function(event, data) {
          console.error('HLS Error:', data);
          if (data.fatal) {
            switch (data.type) {
              case Hls.ErrorTypes.NETWORK_ERROR:
                console.error('Fatal network error encountered, trying to recover...');
                hls.startLoad();
                break;
              case Hls.ErrorTypes.MEDIA_ERROR:
                console.error('Fatal media error encountered, trying to recover...');
                hls.recoverMediaError();
                break;
              default:
                console.error('Unrecoverable HLS error, destroying HLS instance.');
                hls.destroy();
                hls = null; // Nullify the instance
                // Optionally alert user or try re-initializing later
                // alert('An unrecoverable error occurred loading the HLS stream.');
                break;
            }
          } else {
             console.warn('Non-fatal HLS error:', data);
          }
        });

         videoElement.addEventListener('loadedmetadata', function() {
             console.log('HLS Video metadata loaded.');
         });

      } else if (videoElement.canPlayType('application/vnd.apple.mpegurl')) {
        // Native HLS support
        console.log("Native HLS support detected.");
        videoElement.src = hlsSrc;
        videoElement.addEventListener('loadedmetadata', () => {
           console.log("Native HLS metadata loaded, attempting to play...");
           videoElement.controls = true;
           videoElement.play().catch(error => {
               console.warn("Autoplay prevented (native HLS):", error);
           });
        });
         videoElement.addEventListener('error', (e) => {
             console.error('Native HLS playback error:', videoElement.error);
             // alert('Error playing video natively.');
         });

      } else {
        // HLS is not supported
        alert('Your browser does not support HLS playback needed for Stream 1.');
        console.error('HLS is not supported by this browser.');
      }
    }

    // --- Stream Switching Logic ---
    function switchToStream1() {
      console.log("Switching to Stream 1 (HLS)");
      // Pause iframe by setting src to blank (stops loading/playing)
      iframeElement.src = 'about:blank';
      iframeElement.style.display = 'none';

      // Show video element and initialize/play HLS
      videoElement.style.display = 'block';
      setupHLS(); // Re-initialize HLS

      // Update button state
      btnStream1.classList.add('active');
      btnStream2.classList.remove('active');
    }

    function switchToStream2() {
      console.log("Switching to Stream 2 (Embed)");
      // Pause HLS video and destroy instance
      videoElement.pause();
      videoElement.src = ''; // Clear src to be sure
       if (hls) {
          hls.destroy();
          hls = null;
          console.log("HLS instance destroyed.");
       }
       videoElement.style.display = 'none';


      // Show iframe and set its source
      iframeElement.style.display = 'block';
      iframeElement.src = iframeSrc;

      // Update button state
      btnStream1.classList.remove('active');
      btnStream2.classList.add('active');
    }

    // --- Event Listeners for Buttons ---
    btnStream1.addEventListener('click', switchToStream1);
    btnStream2.addEventListener('click', switchToStream2);

    // --- Initialize Default Stream (Stream 1) on Load ---
    document.addEventListener('DOMContentLoaded', () => {
        switchToStream1(); // Start with Stream 1 (HLS)
    });

  </script>

  <!-- No ads, redirects, anti-adblock, or devtool disablers -->

</body>
</html>
